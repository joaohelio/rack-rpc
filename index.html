<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Rack-rpc by rack-rpc</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Rack-rpc</h1>
        <p>Rack middleware for serving up RPC endpoints.</p>

        <p class="view"><a href="https://github.com/rack-rpc/rack-rpc">View the Project on GitHub <small>rack-rpc/rack-rpc</small></a></p>


        <ul>
          <li><a href="https://github.com/rack-rpc/rack-rpc/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/rack-rpc/rack-rpc/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/rack-rpc/rack-rpc">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a name="json-rpcxml-rpc-server-for-rack-applications" class="anchor" href="#json-rpcxml-rpc-server-for-rack-applications"><span class="octicon octicon-link"></span></a>JSON-RPC/XML-RPC Server for Rack Applications</h1>

<p><a href="http://travis-ci.org/threez/rack-rpc"><img src="https://secure.travis-ci.org/threez/rack-rpc.png?branch=master" alt="Build Status"></a></p>

<p>This is a <a href="http://rack.rubyforge.org/">Rack</a> middleware that facilitates the creation of
protocol-agnostic RPC servers. The current implementation provides support
for <a href="http://groups.google.com/group/json-rpc/web/json-rpc-2-0">JSON-RPC 2.0</a> and <a href="http://www.xmlrpc.com/">XML-RPC</a>.</p>

<ul>
<li><a href="https://github.com/datagraph/rack-rpc">https://github.com/datagraph/rack-rpc</a></li>
</ul><h2>
<a name="features" class="anchor" href="#features"><span class="octicon octicon-link"></span></a>Features</h2>

<ul>
<li>Handles JSON-RPC and XML-RPC requests with the same code.</li>
<li>Compatible with any Rack application and any Rack-based framework.</li>
<li>Provides Rails-style controller filtering for your RPC methods.</li>
</ul><h2>
<a name="examples" class="anchor" href="#examples"><span class="octicon octicon-link"></span></a>Examples</h2>

<h3>
<a name="a-basic-rpc-server" class="anchor" href="#a-basic-rpc-server"><span class="octicon octicon-link"></span></a>A basic RPC server</h3>

<pre><code>require 'rack/rpc'

class Server &lt; Rack::RPC::Server
  def hello_world
    "Hello, world!"
  end
  rpc 'hello_world' =&gt; :hello_world
end
</code></pre>

<h3>
<a name="simple-filtering" class="anchor" href="#simple-filtering"><span class="octicon octicon-link"></span></a>Simple filtering</h3>

<pre><code>require 'rack/rpc'

class Server &lt; Rack::RPC::Server
  before_filter :check_auth

  def hello_world
    "Hello, world!"
  end
  rpc 'hello_world' =&gt; :hello_world

  private

  def check_auth
    raise "Not authorized" unless authorized
  end
end
</code></pre>

<h3>
<a name="filtering-via-a-proc-with-more-options" class="anchor" href="#filtering-via-a-proc-with-more-options"><span class="octicon octicon-link"></span></a>Filtering via a proc with more options</h3>

<pre><code>require 'rack/rpc'

class Server &lt; Rack::RPC::Server
  before_filter :check_auth, :only =&gt; :super_secret_hello_world do
    raise "Not authorized" unless authorized
  end

  def hello_world
    "Hello, world!"
  end
  rpc 'hello_world' =&gt; :hello_world

  def super_secret_hello_world
    'super_secret_hello_world'
  end
  rpc 'super_secret_hello_world' =&gt; :super_secret_hello_world
end
</code></pre>

<h3>
<a name="running-the-server" class="anchor" href="#running-the-server"><span class="octicon octicon-link"></span></a>Running the server</h3>

<pre><code># config.ru
use Rack::RPC::Endpoint, Server.new

run MyApplication
</code></pre>

<h3>
<a name="customizing-the-default-rpc-path" class="anchor" href="#customizing-the-default-rpc-path"><span class="octicon octicon-link"></span></a>Customizing the default RPC path</h3>

<pre><code># config.ru
use Rack::RPC::Endpoint, Server.new, :path =&gt; '/api'

run MyApplication
</code></pre>

<h2>
<a name="more-on-filters" class="anchor" href="#more-on-filters"><span class="octicon octicon-link"></span></a>More on Filters</h2>

<p>The <code>:only</code> and <code>:except</code> options for filters can take a single method or an
array of methods.</p>

<p>You can halt execution in a filter by raising an exception. An error
response will be returned with the exception's message set as the error
object's message text.</p>

<h2>
<a name="communicationg-with-the-server" class="anchor" href="#communicationg-with-the-server"><span class="octicon octicon-link"></span></a>Communicationg with the Server</h2>

<p>By default, methods will only be invoked on <code>POST</code> requests to "/rpc". The
default path can be overridden by sending a <code>:path</code> option when creating
your middleware (see example above).</p>

<p>The protocol used is determined by the <code>CONTENT_TYPE</code> header
("application/xml" and "text/xml" for XML and "application/json" for JSON).</p>

<h2>
<a name="dependencies" class="anchor" href="#dependencies"><span class="octicon octicon-link"></span></a>Dependencies</h2>

<ul>
<li>
<a href="http://rubygems.org/gems/rack">Rack</a> (&gt;= 1.0.0)</li>
<li>
<a href="http://rubygems.org/gems/builder">Builder</a> (&gt;= 2.1.2)</li>
</ul><h2>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation</h2>

<p>The recommended installation method is via <a href="http://rubygems.org/">RubyGems</a>.
To install the latest official release of the gem, do:</p>

<pre><code>% [sudo] gem install rack-rpc
</code></pre>

<h2>
<a name="download" class="anchor" href="#download"><span class="octicon octicon-link"></span></a>Download</h2>

<p>To get a local working copy of the development repository, do:</p>

<pre><code>% git clone git://github.com/datagraph/rack-rpc.git
</code></pre>

<p>Alternatively, download the latest development version as a tarball as
follows:</p>

<pre><code>% wget http://github.com/datagraph/rack-rpc/tarball/master
</code></pre>

<h2>
<a name="mailing-list" class="anchor" href="#mailing-list"><span class="octicon octicon-link"></span></a>Mailing List</h2>

<ul>
<li><a href="http://groups.google.com/group/rack-devel">http://groups.google.com/group/rack-devel</a></li>
</ul><h2>
<a name="authors" class="anchor" href="#authors"><span class="octicon octicon-link"></span></a>Authors</h2>

<ul>
<li>
<a href="https://github.com/bendiken">Arto Bendiken</a> - <a href="http://ar.to/">http://ar.to/</a>
</li>
<li>
<a href="https://github.com/jhuckabee">Josh Huckabee</a> - <a href="http://joshhuckabee.com/">http://joshhuckabee.com/</a>
</li>
</ul><h2>
<a name="license" class="anchor" href="#license"><span class="octicon octicon-link"></span></a>License</h2>

<p>This is free and unencumbered public domain software. For more information,
see <a href="http://unlicense.org/">http://unlicense.org/</a> or the accompanying {file:UNLICENSE} file.</p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/rack-rpc">rack-rpc</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-51653708-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>